{"ast":null,"code":"import _objectSpread from\"/Users/muhammadrenauldi/Development/fa/frontend/memberpage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/muhammadrenauldi/Development/fa/frontend/memberpage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{withRouter}from'react-router-dom';import{useDispatch}from'react-redux';import users from'constants/api/users';import{setAuthorizationHeader}from'configs/axios';import{populateProfile}from'store/actions/users';import useForm from'helpers/hooks/useForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginForm(_ref){var history=_ref.history;var dispatch=useDispatch();var _useForm=useForm({u:'',p:''}),_useForm2=_slicedToArray(_useForm,2),_useForm2$=_useForm2[0],u=_useForm2$.u,p=_useForm2$.p,setState=_useForm2[1];function submit(e){e.preventDefault();users.login({u:u,p:p}).then(function(res){setAuthorizationHeader(res.data.token);users.details().then(function(detail){dispatch(populateProfile(detail.data));var production=process.env.REACT_APP_FRONTPAGE_URL==='https://localhost:3005'?'Domain = localhost:3005':'';localStorage.setItem('FA:token',JSON.stringify(_objectSpread(_objectSpread({},res.data),{},{u:u})));var code=u.substr(3,2);localStorage.setItem('code',code);var redirect=localStorage.getItem('FA:redirect');var userCookie={name:detail.data.name,thumbnail:detail.data.avatar};var expires=new Date(new Date().getTime()+1*24*60*60*1000// new Date().getTime() + 10 * 60 * 1000\n);document.cookie=\"FA:user=\".concat(JSON.stringify(userCookie),\"; expires=\").concat(expires.toUTCString(),\"; path:/; \").concat(production);history.push(redirect||'/');});}).catch(function(err){});}return/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center items-center pb-24\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-full sm:w-1/3\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-4xl text-gray-900 mb-6\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Continue\"}),\" Study, \",/*#__PURE__*/_jsx(\"br\",{}),\"Finish your \",/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Goals\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"u\",className:\"text-lg mb-2\",children:\"NPM\"}),/*#__PURE__*/_jsx(\"input\",{name:\"u\",type:\"name\",onChange:setState,className:\"bg-white focus:outline-none border w-full px-6 py-3 border-gray-600 focus:border-blue-700 rounded-md\",value:u,placeholder:\"Your NPM\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"p\",className:\"text-lg mb-2\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{name:\"p\",type:\"password\",onChange:setState,className:\"bg-white focus:outline-none border w-full px-6 py-3 border-gray-600 focus:border-blue-700 rounded-md\",value:p,placeholder:\"Your password\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-700 hover:bg-blue-600 transition-all duration-200 focus:outline-none shadow-inner text-white px-6 py-3 mt-4 w-full\",children:\"Masuk\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-1/12 hidden sm:block\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-5/12 hidden sm:block justify-end pt-24 pr-16\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",style:{width:369,height:440},children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute w-full h-full -mb-8 -ml-8\",children:/*#__PURE__*/_jsx(\"img\",{src:\"#\",alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute z-10 bg-white bottom-0 right-0 py-3 px-4 -mr-12\",style:{width:290},children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900 mb-2\",children:\"Tidak perlu registrasi. Cukup pakai akun mahasiswa\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"~ IT Support Team\"})]})]})})]});}export default withRouter(LoginForm);","map":{"version":3,"sources":["/Users/muhammadrenauldi/Development/fa/frontend/memberpage/src/parts/LoginForm.js"],"names":["React","withRouter","useDispatch","users","setAuthorizationHeader","populateProfile","useForm","LoginForm","history","dispatch","u","p","setState","submit","e","preventDefault","login","then","res","data","token","details","detail","production","process","env","REACT_APP_FRONTPAGE_URL","localStorage","setItem","JSON","stringify","code","substr","redirect","getItem","userCookie","name","thumbnail","avatar","expires","Date","getTime","document","cookie","toUTCString","push","catch","err","width","height"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\n\nimport users from 'constants/api/users';\n\nimport { setAuthorizationHeader } from 'configs/axios';\n\nimport { populateProfile } from 'store/actions/users';\n\nimport useForm from 'helpers/hooks/useForm';\n\nfunction LoginForm({ history }) {\n\tconst dispatch = useDispatch();\n\n\tconst [{ u, p }, setState] = useForm({\n\t\tu: '',\n\t\tp: '',\n\t});\n\n\tfunction submit(e) {\n\t\te.preventDefault();\n\n\t\tusers\n\t\t\t.login({ u, p })\n\t\t\t.then((res) => {\n\t\t\t\tsetAuthorizationHeader(res.data.token);\n\t\t\t\tusers.details().then((detail) => {\n\t\t\t\t\tdispatch(populateProfile(detail.data));\n\t\t\t\t\tconst production =\n\t\t\t\t\t\tprocess.env.REACT_APP_FRONTPAGE_URL === 'https://localhost:3005'\n\t\t\t\t\t\t\t? 'Domain = localhost:3005'\n\t\t\t\t\t\t\t: '';\n\t\t\t\t\tlocalStorage.setItem(\n\t\t\t\t\t\t'FA:token',\n\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\t...res.data,\n\t\t\t\t\t\t\tu: u,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\t\n\t\t\t\t\tconst code = u.substr(3, 2);\n\t\t\t\t\tlocalStorage.setItem(\n\t\t\t\t\t\t'code', code\n\t\t\t\t\t);\n\n\t\t\t\t\tconst redirect = localStorage.getItem('FA:redirect');\n\t\t\t\t\tconst userCookie = {\n\t\t\t\t\t\tname: detail.data.name,\n\t\t\t\t\t\tthumbnail: detail.data.avatar,\n\t\t\t\t\t};\n\n\t\t\t\t\tconst expires = new Date(\n\t\t\t\t\t\tnew Date().getTime() + 1 * 24 * 60 * 60 * 1000\n\t\t\t\t\t\t// new Date().getTime() + 10 * 60 * 1000\n\t\t\t\t\t);\n\n\t\t\t\t\tdocument.cookie = `FA:user=${JSON.stringify(\n\t\t\t\t\t\tuserCookie\n\t\t\t\t\t)}; expires=${expires.toUTCString()}; path:/; ${production}`;\n\n\t\t\t\t\thistory.push(redirect || '/');\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((err) => {});\n\t}\n\n\treturn (\n\t\t<div className='flex justify-center items-center pb-24'>\n\t\t\t<div className='w-full sm:w-1/3'>\n\t\t\t\t<h1 className='text-4xl text-gray-900 mb-6'>\n\t\t\t\t\t<span className='font-bold'>Continue</span> Study, <br />\n\t\t\t\t\tFinish your <span className='font-bold'>Goals</span>\n\t\t\t\t</h1>\n\t\t\t\t<form onSubmit={submit}>\n\t\t\t\t\t<div className='flex flex-col mb-4'>\n\t\t\t\t\t\t<label htmlFor='u' className='text-lg mb-2'>\n\t\t\t\t\t\t\tNPM\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tname='u'\n\t\t\t\t\t\t\ttype='name'\n\t\t\t\t\t\t\tonChange={setState}\n\t\t\t\t\t\t\tclassName='bg-white focus:outline-none border w-full px-6 py-3 border-gray-600 focus:border-blue-700 rounded-md'\n\t\t\t\t\t\t\tvalue={u}\n\t\t\t\t\t\t\tplaceholder='Your NPM'\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className='flex flex-col mb-4'>\n\t\t\t\t\t\t<label htmlFor='p' className='text-lg mb-2'>\n\t\t\t\t\t\t\tPassword\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tname='p'\n\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\tonChange={setState}\n\t\t\t\t\t\t\tclassName='bg-white focus:outline-none border w-full px-6 py-3 border-gray-600 focus:border-blue-700 rounded-md'\n\t\t\t\t\t\t\tvalue={p}\n\t\t\t\t\t\t\tplaceholder='Your password'\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\tclassName='bg-blue-700 hover:bg-blue-600 transition-all duration-200 focus:outline-none shadow-inner text-white px-6 py-3 mt-4 w-full'>\n\t\t\t\t\t\tMasuk\n\t\t\t\t\t</button>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t<div className='w-1/12 hidden sm:block'></div>\n\n\t\t\t<div className='w-5/12 hidden sm:block justify-end pt-24 pr-16'>\n\t\t\t\t<div className='relative' style={{ width: 369, height: 440 }}>\n\t\t\t\t\t<div className='absolute w-full h-full -mb-8 -ml-8'>\n\t\t\t\t\t\t<img src='#' alt='' />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName='absolute z-10 bg-white bottom-0 right-0 py-3 px-4 -mr-12'\n\t\t\t\t\t\tstyle={{ width: 290 }}>\n\t\t\t\t\t\t<p className='text-gray-900 mb-2'>\n\t\t\t\t\t\t\tTidak perlu registrasi. Cukup pakai akun mahasiswa\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<span className='text-gray-600'>~ IT Support Team</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default withRouter(LoginForm);\n"]},"metadata":{},"sourceType":"module"}